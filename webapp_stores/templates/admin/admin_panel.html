{%extends "base.html"%}

{%block content%}

{%with messages = get_flashed_messages() %}
    {%if messages%}
    <div class="alert alert-warning" role="alert">
        {%for message in messages%}
            {{message}}<br>
        {%endfor%}
    </div>
    {%endif%}
    {%endwith%}
        <body>
            <div class = "container">
        <h3>Пользователи</h3>

        <table id="table" class="table table-hover">
            <thead >
                <th scope="col" style="width: 2%">ID</th>
                <th scope="col" style="width: 8%">User</th>
                <th scope="col" style="width: 20%">Mail</th>
                <th scope="col" style="width: 8%">Name</th>
                <th scope="col" style="width: 7%">Surname</th>
                <th scope="col" style="width: 7%">Role</th>
                <th scope="col" style="width: 8%">Active</th>
                <th scope="col" style="width: 8%">Send mail</th>
                <th scope="col" style="width: 6%"></th>
            </thead>
             <tbody id="myTable">
            {% for user in users %}
                <tr>
                    <form action="{{url_for('admin.changes')}}" method="post">
                    <td ><input type=hidden value="{{user.id}}"  name=id />{{user.id}}</td>
                    <td ><input value="{{user.user}}" required placeholder = "{{user.user}}" name=username size="10px" /></td>
                    <td ><input type=email value="{{user.mail}}" required placeholder = "{{user.mail}}" name = "mail" /></td>
                    <td ><input value="{{user.name}}" required placeholder = "{{user.name}}" name=name size="10px" /></td>
                    <td ><input value="{{user.surname}}" required placeholder = "{{user.surname}}" name=surname size="10px"/></td>

                    <td ><select name="role">
                              <option value="{{user.role}}" selected>{{user.role}}</option>
                              <option value="{{user.role_alternative}}">{{user.role_alternative}}</option>
                              </select></td>
                    <td ><select name="active">
                              <option value="{{user.active}}" selected>{{user.active}}</option>
                              <option value="{{user.active_alternative}}">{{user.active_alternative}}</option>
                              </select></td>
                    <td ><select name="send_mail">
                              <option value="{{user.send_mail}}" selected>{{user.send_mail}}</option>
                              <option value="{{user.send_mail_alternative}}">{{user.send_mail_alternative}}</option>
                              </select></td>
                        <td class="text-center">
                        <input class="btn btn-secondary" type="submit" value="Записать">
                        </td>
                        </form>
                        <td class="text-center">
                        <form action="{{url_for('admin.delete_user')}}" method="POST">
                            <input type=hidden value="{{user.id}}" name=user_to_delete />
                            <input class="btn btn-danger" type="submit" value="Удалить">
                        </form>
                    </td>

                 </tr>
            {% endfor %}
            </tbody>
        </table>

            <div class = "row">

                <div class="col-4">

                </div>
                <div class="col-4">

        </div>


        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
      </body>
{%endblock%}